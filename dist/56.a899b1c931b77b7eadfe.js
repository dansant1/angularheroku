(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{mjtb:function(e,t,i){"use strict";i.r(t);var r=i("Valr"),n=i("DUip"),o=i("R7Hv"),c=i("URI+"),a=i("pW6c"),s=i("TYT/"),l=i("E1rE"),d=i("MnXN"),u=i("LdD/"),m=["mDireccion"],p=function(e){return{seleccionado:e}};function f(e,t){if(1&e){var i=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",25),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](i);var e=t.$implicit;return s["\u0275\u0275nextContext"]().abrirUbicacion(e,!1)})),s["\u0275\u0275elementStart"](1,"div",26),s["\u0275\u0275elementStart"](2,"div",27),s["\u0275\u0275element"](3,"img",28),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",29),s["\u0275\u0275elementStart"](5,"h5",30),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"h5",31),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](3,p,n.currentUser$.direccion_id===r._id)),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",r.direccion," "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",r.referencia," ")}}function g(e,t){if(1&e){var i=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",32),s["\u0275\u0275elementStart"](1,"div",33),s["\u0275\u0275elementStart"](2,"i",34),s["\u0275\u0275listener"]("click",(function(){return(0,t.dismiss)("Cross click")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3," Ubicaciones "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",35),s["\u0275\u0275elementStart"](5,"seleccionar-direccion",36),s["\u0275\u0275listener"]("seleccionarDireccion",(function(e){return s["\u0275\u0275restoreView"](i),s["\u0275\u0275nextContext"]().seleccionarDireccion(e)}))("cambiarDireccion",(function(e){return s["\u0275\u0275restoreView"](i),s["\u0275\u0275nextContext"]().cambiarDireccion(e)}))("eliminarDireccion",(function(e){return s["\u0275\u0275restoreView"](i),s["\u0275\u0275nextContext"]().eliminarDireccion(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("locationParam",r.ubicacion$)("currentLocation",r.myLocation$)}}var h=[{path:"",component:function(){function e(e,t,i,r,n){this.router=e,this.sanitizer=t,this.dataService=i,this.modalService=r,this.authenticationService=n,this.ubicacion$=new c.a,this.mainArray$=[],this.isActive=!1,this.myLocation$=!1}return e.prototype.irA=function(){this.regresarUrl$?this.router.navigateByUrl(this.regresarUrl$,{state:{get_pedido_guardado:!0}}):this.authenticationService.redireccionarUsuario(this.currentUser$)},e.prototype.abrirUbicacion=function(e,t){this.ubicacion$=e||new c.a,this.myLocation$=t,this.modalReference=this.modalService.open(this.mDireccion,{windowClass:"cgk-modal-full"})},e.prototype.seleccionarDireccion=function(e){var t=this;this.ubicacion$.direccion=e.direccion,this.ubicacion$.latitude=e.latitude,this.ubicacion$.longitude=e.longitude,this.ubicacion$.referencia=e.referencia,this.currentUser$.direccion=e.direccion,this.currentUser$.latitude=e.latitude,this.currentUser$.longitude=e.longitude,this.currentUser$.referencia=e.referencia,this.dataService.useService("actualizar_ubicacion_usuario",{usuario:this.currentUser$}).subscribe((function(e){t.currentUser$.direccion_id=e.direccion_id,t.authenticationService.changeUserInfo(t.currentUser$),console.log(t.regresarUrl$),t.regresarUrl$?t.router.navigateByUrl(t.regresarUrl$,{state:{get_pedido_guardado:!0}}):t.authenticationService.redireccionarUsuario(t.currentUser$),t.getRegistros()}),(function(e){})),this.modalReference.close()},e.prototype.cambiarDireccion=function(e){var t=this;this.currentUser$.direccion_id=e._id,this.currentUser$.direccion=e.direccion,this.currentUser$.latitude=e.latitude,this.currentUser$.longitude=e.longitude,this.currentUser$.referencia=e.referencia,this.dataService.useService("actualizar_direccion_usuario",{usuario:this.currentUser$,direccion:e}).subscribe((function(e){t.dataService.ejecutarModal({titulo:"\xa1Listo!",mensaje:"Su ubicaci\xf3n ha sido guardada.",mostrar_imagen:!0,url_imagen:"https://codigeek.com/projects/robertodelivery/ilustracion_home.png",tipo:1}),t.authenticationService.changeUserInfo(t.currentUser$),console.log(t.regresarUrl$),t.regresarUrl$?t.router.navigateByUrl(t.regresarUrl$,{state:{get_pedido_guardado:!0}}):t.authenticationService.redireccionarUsuario(t.currentUser$),t.modalReference.close(),t.getRegistros()}),(function(e){}))},e.prototype.eliminarDireccion=function(e){var t=this;this.dataService.useService("eliminar_direccion",{usuario:this.currentUser$,direccion:e}).subscribe((function(e){t.dataService.generalAlert(e),"success"===e.status&&t.dataService.useService("get_direcciones_usuario",{usuario:t.currentUser$}).subscribe((function(e){t.mainArray$=e.data,t.currentUser$.direccion_id=e.data[0]._id,t.currentUser$.direccion=e.data[0].direccion,t.currentUser$.latitude=e.data[0].latitude,t.currentUser$.longitude=e.data[0].longitude,t.currentUser$.referencia=e.data[0].referencia,t.modalReference.close(),t.authenticationService.changeUserInfo(t.currentUser$)}),(function(e){t.dataService.generalAlert(e)}))}),(function(e){t.dataService.generalAlert(e)}))},e.prototype.getRegistros=function(){var e=this;this.dataService.useService("get_direcciones_usuario",{usuario:this.currentUser$}).subscribe((function(t){e.mainArray$=t.data}),(function(t){e.dataService.generalAlert(t)}))},e.prototype.ngOnInit=function(){this.regresarUrl$=history.state.regresar,this.currentUser$=this.authenticationService.currentUserValue,this.getRegistros()},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](n.f),s["\u0275\u0275directiveInject"](l.b),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.f),s["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["administracion-empresas"]],viewQuery:function(e,t){var i;1&e&&s["\u0275\u0275viewQuery"](m,!0),2&e&&s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(t.mDireccion=i.first)},decls:29,vars:2,consts:[[1,"col-12","mt-4",2,"text-align","left","font-weight","bold","width","100%"],[1,"lnr-chevron-left",2,"font-weight","bold","font-size","20px","color","#c70201",3,"click"],[1,"row","m-0"],[1,"col-12","col-sm-6","offset-sm-3",2,"font-family","codigeekfont"],[1,"text-center","mb-4",2,"font-family","codigeekfont"],[1,"col-12","text-center",2,"color","#545454","font-weight","bold"],[2,"margin-bottom","10px","font-weight","bold","font-size","18px"],[2,"font-size","12px","margin-bottom","3px"],[2,"font-size","12px"],[1,"col-12"],[1,"divider"],[1,"col-12","pr-4","pl-4","text-center",2,"color","#c70201","font-weight","bold"],[1,"col-12","p-0"],[1,"position-relative","form-group",3,"click"],["placeholder","Ubicaci\xf3n actual","name","nombre","type","text","required","",1,"custom-input-cg",2,"font-size","13px","pointer-events","none"],["src","https://codigeek.com/projects/robertodelivery/icon_ubication.png",2,"width","15px","position","absolute","bottom","12px","left","12px"],[1,"position-relative","form-group","mt-2",3,"click"],["placeholder","Registrar direcci\xf3n de entrega","name","nombre","type","text","required","",1,"custom-input-cg",2,"font-size","13px","pointer-events","none"],["src","https://codigeek.com/projects/robertodelivery/icon_diretion.png",2,"width","15px","position","absolute","bottom","10px","left","12px"],[1,"row","m-0","mt-4",2,"width","100%"],["class","row m-0","style","padding: 0px 15px;font-family: codigeekfont;width: 90%;",3,"click",4,"ngFor","ngForOf"],[2,"text-align","right","position","fixed","bottom","0","z-index","-1"],["src","https://codigeek.com/projects/robertodelivery/ilustracion_ubocation.png",1,"d-block","d-sm-none",2,"width","70%","float","right"],["src","https://codigeek.com/projects/robertodelivery/ilustracion_ubocation.png",1,"d-none","d-sm-block",2,"width","40%","float","right"],["mDireccion",""],[1,"row","m-0",2,"padding","0px 15px","font-family","codigeekfont","width","90%",3,"click"],[1,"row","m-0","p-3","mb-2",2,"width","100%","background","white","box-shadow","0px 0px 4px -1px #aeaeae","border-radius","3px",3,"ngClass"],[1,"col-1",2,"display","flex","align-items","center","justify-content","center","padding","3px"],["src","https://codigeek.com/projects/robertodelivery/pin_ubicatio_icon.png",2,"width","100%"],[1,"col-11"],[2,"margin","0px","font-size","12px","text-transform","none","color","#545454"],[2,"margin","0px","font-size","10px","text-transform","none"],[1,"modal-header",2,"background","transparent","border","none"],[1,"col-12","mt-3",2,"text-align","left","font-weight","bold","width","100%","display","flex","justify-content","center","color","#c70201","font-family","codigeekfont"],[1,"lnr-chevron-left","mr-3",2,"font-weight","bold","font-size","20px","position","absolute","left","15px",3,"click"],[1,"modal-body",2,"font-family","codigeekfont","padding","0px"],[3,"locationParam","currentLocation","seleccionarDireccion","cambiarDireccion","eliminarDireccion"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"i",1),s["\u0275\u0275listener"]("click",(function(){return t.irA()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275elementStart"](5,"div",5),s["\u0275\u0275elementStart"](6,"h6",6),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"h6",7),s["\u0275\u0275text"](9," para conocer los comercios cercanos, "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"h6",8),s["\u0275\u0275text"](11," ingresa tu direcci\xf3n: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",9),s["\u0275\u0275element"](13,"div",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",11),s["\u0275\u0275elementStart"](15,"div",12),s["\u0275\u0275elementStart"](16,"div",13),s["\u0275\u0275listener"]("click",(function(){return t.abrirUbicacion(null,!0)})),s["\u0275\u0275element"](17,"input",14),s["\u0275\u0275element"](18,"img",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",16),s["\u0275\u0275listener"]("click",(function(){return t.abrirUbicacion(null,!1)})),s["\u0275\u0275element"](20,"input",17),s["\u0275\u0275element"](21,"img",18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",19),s["\u0275\u0275template"](23,f,9,5,"div",20),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",21),s["\u0275\u0275element"](25,"img",22),s["\u0275\u0275element"](26,"img",23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](27,g,6,2,"ng-template",null,24,s["\u0275\u0275templateRefExtractor"])),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate1"](" Bienvenido ",t.currentUser$.nombre,", "),s["\u0275\u0275advance"](16),s["\u0275\u0275property"]("ngForOf",t.mainArray$))},directives:[r.NgForOf,r.NgClass,u.a],encapsulation:2}),e}()}],v=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.g.forChild(h)],n.g]}),e}(),b=i("d2mR");i.d(t,"UbicacionesModule",(function(){return x}));var x=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,v,b.a]]}),e}()}}]);