(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{EK6g:function(e,t,n){"use strict";n.r(t);var r=n("Valr"),i=n("DUip"),o=n("R7Hv"),a=n("WY8p"),l=n("pW6c"),c=n("m5Qg"),s=n("TYT/"),m=n("MnXN"),d=n("QJY3"),p=["search"],u=["mImagen"],g=["mBorrar"],f=["listadoCategorias"];function h(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",22),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().borrar()})),s["\u0275\u0275text"](1," Borrar "),s["\u0275\u0275elementEnd"]()}}function b(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",23),s["\u0275\u0275elementStart"](1,"button",24),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().irACategorias()})),s["\u0275\u0275text"](2," Ir a categor\xedas "),s["\u0275\u0275element"](3,"i",25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function v(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"p",32),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return(0,s["\u0275\u0275nextContext"]().close)(e)})),s["\u0275\u0275element"](1,"i",33),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("",r.nombre," ")}}function x(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",26),s["\u0275\u0275elementStart"](1,"h6",27),s["\u0275\u0275text"](2,"Categor\xeda"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",28),s["\u0275\u0275listener"]("click",(function(){return(0,t.dismiss)("Cross click")})),s["\u0275\u0275elementStart"](4,"span",29),s["\u0275\u0275text"](5,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",30),s["\u0275\u0275template"](7,v,3,1,"p",31),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngForOf",n.categoriasArray$)}}function y(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",26),s["\u0275\u0275elementStart"](1,"h6",27),s["\u0275\u0275text"](2,"Imagen"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",28),s["\u0275\u0275listener"]("click",(function(){return(0,t.dismiss)("Cross click")})),s["\u0275\u0275elementStart"](4,"span",29),s["\u0275\u0275text"](5,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",34),s["\u0275\u0275elementStart"](7,"form",35),s["\u0275\u0275elementStart"](8,"div",36),s["\u0275\u0275elementStart"](9,"input",37),s["\u0275\u0275listener"]("change",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().fileChangeEvent(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"label",38),s["\u0275\u0275text"](11,"Selecciona una imagen..."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"image-cropper",39),s["\u0275\u0275listener"]("imageCropped",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().imageCropped(e)}))("imageLoaded",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().imageLoaded()}))("cropperReady",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().cropperReady()}))("loadImageFailed",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().loadImageFailed()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",40),s["\u0275\u0275elementStart"](14,"button",41),s["\u0275\u0275listener"]("click",(function(){return(0,t.dismiss)("Cross click")})),s["\u0275\u0275text"](15,"Cerrar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"button",42),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().guardarImagen()})),s["\u0275\u0275text"](17,"Guardar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](12),s["\u0275\u0275styleProp"]("display",r.showCropper?null:"none"),s["\u0275\u0275property"]("imageChangedEvent",r.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",128)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)}}function S(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",26),s["\u0275\u0275elementStart"](1,"h6",27),s["\u0275\u0275text"](2,"Borrar registro"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",28),s["\u0275\u0275listener"]("click",(function(){return(0,t.dismiss)("Cross click")})),s["\u0275\u0275elementStart"](4,"span",29),s["\u0275\u0275text"](5,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",34),s["\u0275\u0275elementStart"](7,"p",43),s["\u0275\u0275text"](8," \xbfDeseas borrar este registro? "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",40),s["\u0275\u0275elementStart"](10,"button",41),s["\u0275\u0275listener"]("click",(function(){return(0,t.dismiss)("Cross click")})),s["\u0275\u0275text"](11,"Cerrar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"button",42),s["\u0275\u0275listener"]("click",(function(){return(0,t.close)("Close click")})),s["\u0275\u0275text"](13,"Aceptar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}var C=[{path:"",component:function(){function e(e,t,n,r,i,o){this.ngZone=e,this.router=t,this.activatedRoute=n,this.dataService=r,this.authenticationService=i,this.modalService=o,this.mainObj$=new a.a,this.mainObjParam$=new a.a,this.imageChangedEvent="",this.croppedImage="",this.showCropper=!1}return e.prototype.regresar=function(){this.router.navigateByUrl("/administracion/catalogos",{})},e.prototype.seleccionarCategoria=function(){var e=this;console.log("seleccionarCategoria"),this.dataService.useService("get_categorias",{}).subscribe((function(t){e.categoriasArray$=t.data,console.log(e.categoriasArray$),e.modalReference=e.modalService.open(e.listadoCategorias),e.modalReference.result.then((function(t){e.mainObj$.categoria=t,e.mainObj$.categoria_id=t._id}),(function(e){console.log("exit")}))}),(function(e){alert("Error")}))},e.prototype.irACategorias=function(){this.router.navigateByUrl("/administracion/catalogos-categorias",{state:this.mainObj$})},e.prototype.borrar=function(){var e=this;this.modalReference=this.modalService.open(this.mBorrar),this.modalReference.result.then((function(t){e.dataService.useService("borrar_catalogo",{data:e.mainObj$}).subscribe((function(t){e.dataService.generalAlert(t),e.router.navigateByUrl("/administracion/catalogos",{})}),(function(t){e.dataService.generalAlert(t)}))}),(function(e){console.log("exit")}))},e.prototype.guardar=function(){var e=this;this.mainObj$.nombre?this.mainObj$.categoria?(console.log(this.mainObj$),console.log(this.currentUser$),this.dataService.useService("actualizar_catalogo",{data:this.mainObj$}).subscribe((function(t){e.dataService.generalAlert(t),e.router.navigateByUrl("/administracion/catalogos",{})}),(function(t){e.dataService.generalAlert(t)}))):this.dataService.generalAlert({message:"Completa la categoria.",status:"error"}):this.dataService.generalAlert({message:"Completa el nombre.",status:"error"})},e.prototype.guardarImagen=function(){this.mainObj$.foto=this.croppedImage,this.modalReference.close()},e.prototype.subirImagen=function(){this.open(this.templateSubirImagen)},e.prototype.open=function(e){this.modalReference=this.modalService.open(e),this.modalReference.result.then((function(e){console.log("modal_closed")}),(function(e){console.log("exit")}))},e.prototype.fileChangeEvent=function(e){console.log("file changed"),console.log("event"),this.imageChangedEvent=e},e.prototype.imageCropped=function(e){this.croppedImage=e.base64,console.log(e)},e.prototype.imageLoaded=function(){this.showCropper=!0,console.log("Image loaded")},e.prototype.cropperReady=function(){console.log("Cropper ready")},e.prototype.loadImageFailed=function(){console.log("Load failed")},e.prototype.rotateLeft=function(){},e.prototype.rotateRight=function(){},e.prototype.flipHorizontal=function(){},e.prototype.flipVertical=function(){},e.prototype.ngOnInit=function(){console.log("Param on init categoria"),console.log(history.state),history.state._id&&(this.mainObj$=history.state),this.currentUser$=this.authenticationService.currentUserValue},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.NgZone),s["\u0275\u0275directiveInject"](i.f),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](m.f))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["catalogo-acceso"]],viewQuery:function(e,t){var n;1&e&&(s["\u0275\u0275viewQuery"](c.a,!0),s["\u0275\u0275viewQuery"](p,!0),s["\u0275\u0275viewQuery"](u,!0),s["\u0275\u0275viewQuery"](g,!0),s["\u0275\u0275viewQuery"](f,!0)),2&e&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.imageCropper=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.searchElementRef=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.templateSubirImagen=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.mBorrar=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.listadoCategorias=n.first))},decls:30,vars:4,consts:[[1,"col-12","mt-4","mb-4",2,"text-align","left","font-weight","bold","width","100%","display","flex","justify-content","center","color","#c70201","font-family","codigeekfont"],[1,"lnr-chevron-left","mr-3",2,"font-weight","bold","font-size","20px","position","absolute","left","15px",3,"click"],[1,"row","m-0"],[1,"pl-3","pr-3","mt-2","col-12",2,"font-family","codigeekfont"],[1,"page-title-actions",2,"padding","10px 0px","text-align","right"],["type","button","class","btn-shadow d-inline-flex align-items-center btn btn-danger mr-2",3,"click",4,"ngIf"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-success",3,"click"],[1,"card","main-card","mb-4"],[2,"margin-top","15px","padding","15px"],[1,"position-relative","form-group",2,"margin-top","15px"],[1,"cg-input",2,"margin-bottom","25px"],["name","nombre","type","text","required","",1,"cg-input-adicional",3,"ngModel","ngModelChange"],[1,"highlight"],[1,"bar"],[1,"cg-label-input"],[1,"col-12","p-0",2,"margin-bottom","20px"],[2,"font-size","14px","color","#c70201","position","relative"],[2,"position","relative","float","right","color","#999",3,"click"],["class","page-title-actions","style","padding: 0px; text-align: right;",4,"ngIf"],["listadoCategorias",""],["mImagen",""],["mBorrar",""],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-danger","mr-2",3,"click"],[1,"page-title-actions",2,"padding","0px","text-align","right"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-dark",3,"click"],[1,"lnr-arrow-right"],[1,"modal-header",2,"background","none","padding","10px 15px"],[1,"modal-title",2,"color","black","font-weight","500"],["type","button","aria-label","Close",1,"close",2,"padding","10px 15px",3,"click"],["aria-hidden","true"],[1,"modal-body",2,"max-height","400px","overflow-y","scroll"],["style","margin: 8px 0px;cursor:pointer;padding-bottom: 8px;border-bottom: 1px solid #eaeaea;",3,"click",4,"ngFor","ngForOf"],[2,"margin","8px 0px","cursor","pointer","padding-bottom","8px","border-bottom","1px solid #eaeaea",3,"click"],[1,"pe-7s-angle-right"],[1,"modal-body"],[2,"margin-top","15px"],[1,"custom-file","mb-3"],["type","file","id","validatedCustomFile","required","",1,"custom-file-input",3,"change"],["for","validatedCustomFile",1,"custom-file-label"],["format","png","outputType","base64",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"modal-footer",2,"background","none"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"],[2,"margin","5px 0px"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"i",1),s["\u0275\u0275listener"]("click",(function(){return t.regresar()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](2," Cat\xe1logo\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"div",3),s["\u0275\u0275elementStart"](5,"div",4),s["\u0275\u0275template"](6,h,2,0,"button",5),s["\u0275\u0275elementStart"](7,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.guardar()})),s["\u0275\u0275text"](8," Guardar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",7),s["\u0275\u0275elementStart"](10,"form",8),s["\u0275\u0275elementStart"](11,"div",9),s["\u0275\u0275elementStart"](12,"div",10),s["\u0275\u0275elementStart"](13,"input",11),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.mainObj$.nombre=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](14,"span",12),s["\u0275\u0275element"](15,"span",13),s["\u0275\u0275elementStart"](16,"label",14),s["\u0275\u0275text"](17,"Nombre del cat\xe1logo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",15),s["\u0275\u0275elementStart"](19,"label",16),s["\u0275\u0275text"](20," Categor\xeda "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"label",17),s["\u0275\u0275listener"]("click",(function(){return t.seleccionarCategoria()})),s["\u0275\u0275text"](22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](23,b,4,0,"div",18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](24,x,8,1,"ng-template",null,19,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](26,y,18,9,"ng-template",null,20,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](28,S,14,0,"ng-template",null,21,s["\u0275\u0275templateRefExtractor"])),2&e&&(s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.mainObj$._id),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.mainObj$.nombre),s["\u0275\u0275advance"](9),s["\u0275\u0275textInterpolate1"](" ",t.mainObj$.categoria_id?t.mainObj$.categoria.nombre:"Selecciona"," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.mainObj$._id))},directives:[r.NgIf,d.u,d.m,d.n,d.d,d.s,d.l,d.o,r.NgForOf,c.a],encapsulation:2}),e}()}],E=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(C)],i.g]}),e}(),w=n("d2mR");n.d(t,"CatalogoModule",(function(){return k}));var k=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,E,w.a]]}),e}()}}]);