
<div class="mb-3" *ngIf="sinPedidos$" style="color: #948112; background-color: #fff7c9; border-color: #f0e49a;padding: 10px;">
  Bienvenido a EnBio en esta sección recibirás tus pedidos
</div >

<div class="row m-0" *ngIf="mainArray$.length>0" style="width: 100%;padding: 15px 0px;border-radius: 20px 20px 0px 0px;">
  <div class="mt-2" style="font-family:codigeekfont;width:100%;">
    <div>
      <ngb-tabset class="tabs-animated tabs-animated-shadow">
        <ngb-tab>
          <ng-template ngbTabTitle><span>Pendientes</span></ng-template>
          <ng-template ngbTabContent>
            <div class="row" style="font-family: codigeekfont;margin: 0px;width: 100%;">
              <div class="col-12 col-sm-4 mb-3" @restaurantes *ngFor="let pedido_t of pedidosEnCurso$; index as i">
                <div class="card main-card" (click)="gestionarPedido(pedido_t)" style="padding: 15px;background: #eeeeee;box-shadow: 0px 3px 10px 0px #bebebe;">
                  <div class="row m-0 p-0">
                    <div class="col-9 pl-0 pr-2" style="align-items: center; display: flex;">
                        <div class="widget-heading" style="font-size: 14px;color: #c70201;margin-bottom: 2px;font-weight: 600;line-height: 1;">
                          {{ pedido_t.usuario.nombre }}/ {{ pedido_t._id | limitTo : 8 }}
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 8px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Fecha:
                            </span>
                            <span *ngIf="pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_pedido | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_pedido | date:'hh:mm' }}
                            </span>
                            <span *ngIf="!pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_alta | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_alta | date:'hh:mm' }}
                            </span>
                          </div>
                          <div *ngIf="pedido_t.hora_pedido" style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Hora de entrega:
                            </span>
                            {{ pedido_t.hora_pedido }}
                          </div>
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span *ngIf="pedido_t.tipo_servicio === 1">
                              Entrega en tienda /
                            </span>
                            <span *ngIf="pedido_t.tipo_servicio === 2">
                              Entrega a domicilio /
                            </span>
                            <span>
                              {{ pedido_t.forma_pago.descripcion }}
                            </span>
                          </div>
                        </div>
                    </div>
                    <div class="col-3 pl-0 pr-2" style="align-items: center; display: flex;">
                      <div style="color: #20284c;font-weight: bold;font-size: 15px;margin-top: 5px;">
                        S/ {{ pedido_t.total }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle><span>Confirmados</span></ng-template>
          <ng-template ngbTabContent>
            <div class="row" style="font-family: codigeekfont;margin: 0px;width: 100%;">
              <div class="col-12 col-sm-4 mb-3" @restaurantes *ngFor="let pedido_t of pedidosConfirmados$; index as i">
                <div class="card main-card" (click)="gestionarPedido(pedido_t)" style="padding: 15px;background: #eeeeee;box-shadow: 0px 3px 10px 0px #bebebe;">
                  <div class="row m-0 p-0">
                    <div class="col-9 pl-0 pr-2" style="align-items: center; display: flex;">
                        <div class="widget-heading" style="font-size: 14px;color: #c70201;margin-bottom: 2px;font-weight: 600;line-height: 1;">
                          {{ pedido_t.usuario.nombre }}/ {{ pedido_t._id | limitTo : 8 }}
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 8px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Fecha:
                            </span>
                            <span *ngIf="pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_pedido | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_pedido | date:'hh:mm' }}
                            </span>
                            <span *ngIf="!pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_alta | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_alta | date:'hh:mm' }}
                            </span>
                          </div>
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Hora de entrega:
                            </span>
                            {{ pedido_t.fecha_alta | date:'hh:mm' }}
                          </div>
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span *ngIf="pedido_t.tipo_servicio === 1">
                              Entrega en tienda /
                            </span>
                            <span *ngIf="pedido_t.tipo_servicio === 2">
                              Entrega a domicilio /
                            </span>
                            <span>
                              {{ pedido_t.forma_pago.descripcion }}
                            </span>
                          </div>
                        </div>
                    </div>
                    <div class="col-3 pl-0 pr-2" style="align-items: center; display: flex;">
                      <div style="color: #20284c;font-weight: bold;font-size: 15px;margin-top: 5px;">
                        S/ {{ pedido_t.total }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle><span>Entregados</span></ng-template>
          <ng-template ngbTabContent>
            <div class="row" style="font-family: codigeekfont;margin: 0px;width: 100%;">
              <div class="col-12 col-sm-6 mb-3" @restaurantes *ngFor="let pedido_t of pedidosCompletados$; index as i">
                <div class="card main-card" (click)="gestionarPedido(pedido_t)" style="padding: 15px;background: #eeeeee;box-shadow: 0px 3px 10px 0px #bebebe;">
                  <div class="row m-0 p-0">
                    <div class="col-9 pl-0 pr-2" style="align-items: center; display: flex;">
                        <div class="widget-heading" style="font-size: 14px;color: #c70201;margin-bottom: 2px;font-weight: 600;line-height: 1;">
                          {{ pedido_t.usuario.nombre }}/ {{ pedido_t._id | limitTo : 8 }}
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 8px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Fecha:
                            </span>
                            <span *ngIf="pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_pedido | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_pedido | date:'hh:mm' }}
                            </span>
                            <span *ngIf="!pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_alta | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_alta | date:'hh:mm' }}
                            </span>
                          </div>
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Hora de entrega:
                            </span>
                            {{ pedido_t.fecha_alta | date:'hh:mm' }}
                          </div>
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span *ngIf="pedido_t.tipo_servicio === 1">
                              Entrega en tienda /
                            </span>
                            <span *ngIf="pedido_t.tipo_servicio === 2">
                              Entrega a domicilio /
                            </span>
                            <span>
                              {{ pedido_t.forma_pago.descripcion }}
                            </span>
                          </div>
                        </div>
                    </div>
                    <div class="col-3 pl-0 pr-2" style="align-items: center; display: flex;">
                      <div style="color: #20284c;font-weight: bold;font-size: 15px;margin-top: 5px;">
                        S/ {{ pedido_t.total }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle><span>Cancelados</span></ng-template>
          <ng-template ngbTabContent>
            <div class="row" style="font-family: codigeekfont;margin: 0px;width: 100%;">
              <div class="col-12 col-sm-6 mb-3" @restaurantes *ngFor="let pedido_t of pedidosCancelados$; index as i">
                <div class="card main-card" (click)="gestionarPedido(pedido_t)" style="padding: 15px;background: #eeeeee;box-shadow: 0px 3px 10px 0px #bebebe;">
                  <div class="row m-0 p-0">
                    <div class="col-9 pl-0 pr-2" style="align-items: center; display: flex;">
                        <div class="widget-heading" style="font-size: 14px;color: #c70201;margin-bottom: 2px;font-weight: 600;line-height: 1;">
                          {{ pedido_t.usuario.nombre }}/ {{ pedido_t._id | limitTo : 8 }}
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 8px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Fecha:
                            </span>
                            <span *ngIf="pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_pedido | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_pedido | date:'hh:mm' }}
                            </span>
                            <span *ngIf="!pedido_t.fecha_pedido">
                              {{ pedido_t.fecha_alta | date:'dd/MM/yyyy' }} {{ pedido_t.fecha_alta | date:'hh:mm' }}
                            </span>
                          </div>
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span style="font-weight:bold;color: #20284c;">
                              Hora de entrega:
                            </span>
                            {{ pedido_t.fecha_alta | date:'hh:mm' }}
                          </div>
                          <div style="color: #9e9e9e;font-weight: normal;font-size: 10px;margin-top: 5px;">
                            <span *ngIf="pedido_t.tipo_servicio === 1">
                              Entrega en tienda /
                            </span>
                            <span *ngIf="pedido_t.tipo_servicio === 2">
                              Entrega a domicilio /
                            </span>
                            <span>
                              {{ pedido_t.forma_pago.descripcion }}
                            </span>
                          </div>
                        </div>
                    </div>
                    <div class="col-3 pl-0 pr-2" style="align-items: center; display: flex;">
                      <div style="color: #20284c;font-weight: bold;font-size: 15px;margin-top: 5px;">
                        S/ {{ pedido_t.total }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>
      </ngb-tabset>
    </div>
  </div>
</div>
